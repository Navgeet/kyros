{
  "session_id": "demo123",
  "created_at": "2024-01-15T10:30:00",
  "last_activity": "2024-01-15T11:15:00",
  "user_request": "Help me create a Python script to organize my files by date",
  "text_plan": "1. Get all files in directory\n2. Extract creation dates\n3. Create date-based folders\n4. Move files to appropriate folders",
  "python_code": "import os\nimport shutil\nfrom datetime import datetime\n\ndef organize_files():\n    # Implementation here\n    pass",
  "conversation_history": [
    {
      "from": "user",
      "content": "Help me create a Python script to organize my files by date",
      "timestamp": "2024-01-15T10:30:00"
    },
    {
      "from": "system",
      "content": "I'll help you create a script to organize files by date. Here's my plan:\n1. Get all files in directory\n2. Extract creation dates\n3. Create date-based folders\n4. Move files to appropriate folders",
      "timestamp": "2024-01-15T10:31:00"
    },
    {
      "from": "user",
      "content": "text_plan_approved",
      "timestamp": "2024-01-15T10:32:00"
    },
    {
      "from": "system",
      "content": "import os\nimport shutil\nfrom datetime import datetime\n\ndef organize_files():\n    for file in os.listdir('.'):\n        if os.path.isfile(file):\n            date = datetime.fromtimestamp(os.path.getctime(file))\n            folder = date.strftime('%Y-%m')\n            os.makedirs(folder, exist_ok=True)\n            shutil.move(file, os.path.join(folder, file))",
      "timestamp": "2024-01-15T10:35:00"
    },
    {
      "from": "user",
      "content": "This code is too aggressive - it moves ALL files including important system files. Please improve it to be safer and only move specific file types like documents and images.",
      "timestamp": "2024-01-15T10:38:00"
    },
    {
      "from": "system",
      "content": "You're absolutely right! Here's a much safer version that only moves specific file types:\n\nimport os\nimport shutil\nfrom datetime import datetime\n\ndef organize_files(source_dir='.', file_types=None):\n    if file_types is None:\n        file_types = ['.pdf', '.doc', '.docx', '.jpg', '.png', '.txt']\n    \n    for file in os.listdir(source_dir):\n        if os.path.isfile(file) and any(file.lower().endswith(ext) for ext in file_types):\n            date = datetime.fromtimestamp(os.path.getctime(file))\n            folder = date.strftime('%Y-%m')\n            os.makedirs(folder, exist_ok=True)\n            shutil.move(file, os.path.join(folder, file))\n            print(f'Moved {file} to {folder}/')",
      "timestamp": "2024-01-15T10:42:00"
    },
    {
      "from": "user",
      "content": "code_approved",
      "timestamp": "2024-01-15T10:45:00"
    }
  ],
  "metadata": {
    "agent_version": "2.0.0",
    "total_messages": 6,
    "has_text_plan": true,
    "has_code": true,
    "saved_at": "2025-09-22T19:11:18.902962"
  }
}